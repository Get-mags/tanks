<!doctype html>
<html class="no-js" lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Aaron's Collection of Things</title>
    <link rel="stylesheet" href="/css/foundation.css" />
    <script src="/js/vendor/modernizr.js"></script>
    <script type="text/javascript" src="js/phaser.min.js"></script>
    <script type="text/javascript" src="config.js"></script>
    <script type="text/javascript" src="play-state.js"></script>
    <script type="text/javascript" src="next-mission-state.js"></script>
    <script type="text/javascript" src="title-state.js"></script>
    <script type="text/javascript" src="level-up.js"></script>
    <script type="text/javascript" src="mechanics-commons.js"></script>
    <script type="text/javascript" src="enemies.js"></script>
    <script type="text/javascript" src="player.js"></script>
    <script type="text/javascript" src="objs.js"></script>
    <script type="text/javascript" src="level-manager.js"></script>
  </head>
  <body>

    <nav class="top-bar" data-topbar role="navigation">
      <ul class="title-area">
        <li class="name">
          <h1><a href="#"></a></h1>
        </li>
        <li class="toggle-topbar menu-icon"><a href="#"><span>Menu</span></a></li>
      </ul>

      <section class="top-bar-section">

        <ul class="left">180/
          <li class="active"><a href="index.html">Home</a></li>
        </ul>
      </section>
    </nav>
  
  <script type="text/javascript">

  var cursors;
  var player;
  var bullets;
  var walls;
  var tanks;
  var enemies = [];
  var layout;
  var level = 1;
  var stage = "PLAY";

  var game = new Phaser.Game(GAME_WIDTH, GAME_HEIGHT, Phaser.AUTO, 'game');
  game.state.add("game-title", titleState);
  game.state.add("play-state", playState);
  game.state.add("next-mission", nextMission);
  game.state.add("level-up", levelUp);
  game.state.start("game-title");

  
  function gameOver () {
    game.paused = true;
    game.add.text(GAME_WIDTH/2, 100, "GAME OVER", {size: "32px", fille: "#FFF", align: "center"});
  }

  function win () {
    game.paused = true;
    game.add.text(GAME_WIDTH/2, 100, "YOU WIN", {size: "32px", fille: "#FFF", align: "center"});
    level++;
    setTimeout(switchState, 1500);
  }

  function switchState () {
    game.paused = false;
    if (level % 2 == 0) game.state.start("level-up");
    else game.state.start("next-mission");
  }

  function destroyTank (a, b) {
    bulletDie(b);
    if (a.parentFcn.gameObjType == "PLAYER") {}
    else destroyEnemy(a.parentFcn);
  }

  function destroyEnemy (enemy) {
    for (var i = 0; i < enemies.length; i++) {
      if (enemies[i] === enemy) {
        enemy.die();
        enemies.splice(i, 1);
        break;
      }
    }

    if (enemies.length == 0) win();
  }

  </script>
  </body>
</html>
